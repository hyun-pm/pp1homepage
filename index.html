<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Super PPM</title>
    <link rel="stylesheet" href="styles.css" />
    <meta name="color-scheme" content="light" />
  </head>
  <body>
    <header class="topbar">
      <button class="logo-btn" id="logoBtn" aria-label="SUPER PPM ì†Œê°œ ì• ë‹ˆë©”ì´ì…˜ ë‹¤ì‹œ ì‹¤í–‰">
        SUPERPPM
      </button>
    </header>

    <!-- ì´ˆê¸° ë¬¸êµ¬: ì²˜ìŒë§Œ ë…¸ì¶œ í›„ ìë™ ìˆ¨ê¹€ -->
    <div class="pixel-text" id="introText" aria-live="polite"></div>

    <main class="hero" role="main">
      <!-- âœ… ë°°ê²½ ì•„ì´í…œ(íˆì–´ë¡œ ì „ì²´, pp1 ë’¤) -->
      <div id="flowBg" class="flow-bg" aria-hidden="true"></div>

      <div class="hero-figure">
        <img src="pp1.png" alt="Super PPM ìºë¦­í„° ì´ë¯¸ì§€" class="hero-image" />

        <!-- ìºë¦­í„° í•«ìŠ¤íŒŸë“¤ (íˆ¬ëª…) -->
        <button class="hotspot nahyun-area"   id="hs-nahyun"   aria-label="ë‚˜í˜„ ìºë¦­í„° ì—´ê¸°"></button>
        <button class="hotspot chulho-area"   id="hs-chulho"   aria-label="ê¹€ì² í˜¸ ìºë¦­í„° ì—´ê¸°"></button>
        <button class="hotspot jihye-area"    id="hs-jihye"    aria-label="ì„¤ì§€í˜œ ìºë¦­í„° ì—´ê¸°"></button>
        <button class="hotspot suji-area"     id="hs-suji"     aria-label="ê¹€ìˆ˜ì§€ ìºë¦­í„° ì—´ê¸°"></button>
        <button class="hotspot rokjeong-area" id="hs-rokjeong" aria-label="ì •ë¡ì • ìºë¦­í„° ì—´ê¸°"></button>
        <button class="hotspot guhee-area"    id="hs-guhee"    aria-label="í•œêµ¬í¬ ìºë¦­í„° ì—´ê¸°"></button>
        <button class="hotspot yonsoo-area"   id="hs-yonsoo"   aria-label="ë°•ì—°ìˆ˜ ìºë¦­í„° ì—´ê¸°"></button>
        <button class="hotspot kabmin-area"   id="hs-kabmin"   aria-label="ê¹€ê°‘ë¯¼ ìºë¦­í„° ì—´ê¸°"></button>
      </div>
    </main>

    <!-- ì˜ìƒ ëª¨ë‹¬ -->
    <div class="video-modal" id="videoModal" aria-hidden="true" role="dialog" aria-label="ìºë¦­í„° ì˜ìƒ">
      <div class="video-wrap">
        <video id="charVideo" playsinline controls muted></video>
        <div class="video-caption" id="videoCaption" aria-live="polite"></div>
        <button class="close-btn" id="closeModal" aria-label="ì˜ìƒ ë‹«ê¸°">âœ•</button>
      </div>
    </div>

    <script>
      // ì—˜ë¦¬ë¨¼íŠ¸
      const introText   = document.getElementById("introText");
      const logoBtn     = document.getElementById("logoBtn");
      const videoModal  = document.getElementById("videoModal");
      const closeModal  = document.getElementById("closeModal");
      const charVideo   = document.getElementById("charVideo");
      const videoCap    = document.getElementById("videoCaption");

      // í•«ìŠ¤íŒŸ
      const hsNahyun   = document.getElementById("hs-nahyun");
      const hsChulho   = document.getElementById("hs-chulho");
      const hsJihye    = document.getElementById("hs-jihye");
      const hsSuji     = document.getElementById("hs-suji");
      const hsRokjeong = document.getElementById("hs-rokjeong");
      const hsGuhee    = document.getElementById("hs-guhee");
      const hsYonsoo   = document.getElementById("hs-yonsoo");
      const hsKabmin   = document.getElementById("hs-kabmin");

      // ë¬¸êµ¬
      const defaultMessage =
`ìš°ë¦¬ëŠ” ë§ˆì¹˜ ë§ˆë¦¬ì˜¤ íŒŒí‹°ì²˜ëŸ¼, ê°ì ë‹¤ë¥¸ ìŠ¤í‚¬ì„ ê°€ì§„ ìºë¦­í„°ë“¤ì´ ëª¨ì—¬ í•˜ë‚˜ì˜ í° ëª¨í—˜ì„ ë§Œë“¤ì–´ê°€ëŠ” íŒ€ì…ë‹ˆë‹¤.
ëˆ„êµ°ê°€ëŠ” í˜ìœ¼ë¡œ, ëˆ„êµ°ê°€ëŠ” ì•„ì´ë””ì–´ë¡œ, ë˜ ë‹¤ë¥¸ ëˆ„êµ°ê°€ëŠ” ë¶„ìœ„ê¸°ë¥¼ ë°íˆë©°,
í•¨ê»˜ë¼ë©´ ì–´ë–¤ ë³´ìŠ¤ì „ë„ ë‘ë µì§€ ì•ŠìŠµë‹ˆë‹¤!
ê° ìºë¦­í„°ë¥¼ í´ë¦­í•˜ì—¬ ë©¤ë²„ë³„ íŠ¹ì„±ì„ í™•ì¸í•´ë³´ì„¸ìš”`;

      const NAHYUN   = { message: "ë°ê³  ì¹œí™”ì ì¸ ì—ë„ˆì§€ë¡œ íŒ€ì„ ë”°ëœ»í•˜ê²Œ ë¬¶ì–´ì£¼ëŠ” \në¬´ë“œë©”ì´ì»¤ ë‚˜í˜„", video: "videos/nahyun.mp4" };
      const CHULHO   = { message: "í˜ê³¼ ì¶”ì§„ë ¥ìœ¼ë¡œ ë¬´ê±°ìš´ í”„ë¡œì íŠ¸ë¥¼ ê³¼ê°íˆ ë°€ì–´ë¶™ì´ëŠ” \níŒŒì›Œ í”Œë ˆì´ì–´ ê¹€ì² í˜¸", video: "videos/chulho.mp4" };
      const JIHYE    = { message: "ë¹ ë¥¸ ìë£Œ ì •ë¦¬ì™€ ê¼¼ê¼¼í•œ ì§€ì›ìœ¼ë¡œ ëª¨í—˜ì˜ ê¸°ì´ˆ ì²´ë ¥ì„ ì±…ì„ì§€ëŠ” \në“ ë“ í•œ ì„œí¬í„° ì„¤ì§€í˜œ", video: "videos/jihye.mp4" };
      const SUJI     = { message: "íŒ€ì˜ ë¬´ë“œë¥¼ ë°ê²Œ í•˜ê³  ìœ„ê¸°ì—ì„œ ì í”„í•´ ê¸¸ì„ ì—´ì–´ì£¼ëŠ” \në¦¬ë” ê¹€ìˆ˜ì§€", video: "videos/suji.mp4" };
      const ROKJEONG = { message: "ì•„ì´ë””ì–´ë¥¼ ë¹ ë¥´ê²Œ ì‚¼í‚¤ê³ , ì†Œí™”í•´ì„œ íŒ€ ë§ì¶¤í˜•ìœ¼ë¡œ ë‹¤ì‹œ ë‚´ë†“ëŠ” \në“ ë“ í•œ ë™ë£Œ ì •ë¡ì •", video: "videos/rokjeong.mp4" };
      const GUHEE    = { message: "ë³€ì¹™ í”Œë ˆì´ì™€ ë°˜ì „ ì•„ì´ë””ì–´ë¡œ ì˜ˆìƒì„ ê¹¨ê³  ìƒˆë¡œìš´ ê¸¸ì„ ë§Œë“¤ì–´ë‚´ëŠ” \nì „ëµê°€ í•œêµ¬í¬", video: "videos/guhee.mp4" };
      const YONSOO   = { message: "ì—ë„ˆì§€ì™€ ì—´ì •ìœ¼ë¡œ ë¶„ìœ„ê¸°ë¥¼ ë¶ˆíƒœìš°ê³ , ìƒˆë¡œìš´ ë„ì „ì„ ë‘ë ¤ì›Œí•˜ì§€ ì•ŠëŠ” \nì¶”ì§„ë ¥ ë‹´ë‹¹ ë°•ì—°ìˆ˜", video: "videos/yonsoo.mp4" };
      const KABMIN   = { message: "pp1ì˜ ì •ì‹ ì  ì§€ì£¼ ê°‘ë¯¼ë‹˜", video: "videos/kabmin.mp4" };

      // íƒ€ì ì• ë‹ˆë©”ì´ì…˜
      let typerTimer;
      function typeWriter(text, el, speed = 40) {
        clearInterval(typerTimer);
        el.textContent = "";
        let i = 0;
        return new Promise(resolve => {
          typerTimer = setInterval(() => {
            el.textContent += text[i] ?? "";
            i++;
            if (i >= text.length) {
              clearInterval(typerTimer);
              resolve();
            }
          }, speed);
        });
      }

      // ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸°
      async function openVideo(src, message) {
        introText.classList.add("hidden");
        videoCap.textContent = "";
        await Promise.resolve();
        typeWriter(message, videoCap, 35);

        charVideo.src = src;
        charVideo.currentTime = 0;
        videoModal.classList.add("show");
        videoModal.setAttribute("aria-hidden", "false");
        charVideo.play().catch(() => {});
      }
      function closeVideo() {
        charVideo.pause();
        charVideo.currentTime = 0;
        videoModal.classList.remove("show");
        videoModal.setAttribute("aria-hidden", "true");
        charVideo.removeAttribute("src");
        charVideo.load();
        videoCap.textContent = "";
      }
      closeModal.addEventListener("click", closeVideo);
      videoModal.addEventListener("click", (e) => { if (e.target === videoModal) closeVideo(); });
      document.addEventListener("keydown", (e) => { if (e.key === "Escape") closeVideo(); });

      // ì´ˆê¸°: ê¸°ë³¸ ë¬¸êµ¬ ì¶œë ¥ í›„ ìë™ ìˆ¨ê¹€
      window.addEventListener("DOMContentLoaded", async () => {
        await typeWriter(defaultMessage, introText, 40);
        setTimeout(() => introText.classList.add("hidden"), 3000);
      });
      // ë¡œê³  í´ë¦­ â†’ ì´ˆê¸° ë¬¸êµ¬ ë‹¤ì‹œ ë³´ê¸°
      logoBtn.addEventListener("click", async () => {
        introText.classList.remove("hidden");
        await typeWriter(defaultMessage, introText, 40);
        setTimeout(() => introText.classList.add("hidden"), 3000);
      });

      // ìºë¦­í„° í´ë¦­
      hsNahyun  .addEventListener("click", () => openVideo(NAHYUN.video,   NAHYUN.message));
      hsChulho  .addEventListener("click", () => openVideo(CHULHO.video,   CHULHO.message));
      hsJihye   .addEventListener("click", () => openVideo(JIHYE.video,    JIHYE.message));
      hsSuji    .addEventListener("click", () => openVideo(SUJI.video,     SUJI.message));
      hsRokjeong.addEventListener("click", () => openVideo(ROKJEONG.video, ROKJEONG.message));
      hsGuhee   .addEventListener("click", () => openVideo(GUHEE.video,    GUHEE.message));
      hsYonsoo  .addEventListener("click", () => openVideo(YONSOO.video,   YONSOO.message));
      hsKabmin  .addEventListener("click", () => openVideo(KABMIN.video,   KABMIN.message));

      /* ğŸŒŸ íë¥´ëŠ” ë°°ê²½ ì‹œë“œ (.hero ì „ì²´ ê¸°ì¤€) â€” ìœ„â†’ì•„ë˜ ì§í•˜ê°•, ì‹œì‘ ì§€ì—° 0~1s */
      const flowBg = document.getElementById('flowBg');

      function imgFor(type){
        if (type === 'heart') return './heart.png';
        if (type === 'star')  return './star.png';
        return './box.png';
      }

      function seedFlow(total = 40) {
        if (!flowBg) return;
        flowBg.innerHTML = '';
        const types = ['heart','star','box'];
        for (let i = 0; i < total; i++) {
          const t = types[i % types.length];
          const s = document.createElement('span');
          s.className = `sprite ${t}`;

          // ëœë¤ X, í™”ë©´ ìœ„ìª½(-30~-10vh)ì—ì„œ ì‹œì‘
          s.style.left = (Math.random() * 100).toFixed(2) + 'vw';
          s.style.top  = (-30 + Math.random() * 20).toFixed(2) + 'vh';

          // í¬ê¸°/ì†ë„/ì§€ì—°
          const size = 28 + Math.random() * 28; // 28~56px
          s.style.setProperty('--size', size + 'px');
          s.style.backgroundImage = `url('${imgFor(t)}')`;
          s.style.animationDelay    = (Math.random() * 1).toFixed(2) + 's';   // âœ… 0~1ì´ˆë§Œ ì§€ì—°
          s.style.animationDuration = (10 + Math.random() * 10).toFixed(2) + 's'; // 10~20së¡œ ë‚™í•˜

          flowBg.appendChild(s);
        }
      }

      // ì´ˆê¸° ì‹œë“œ
      seedFlow(40);

      // ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ì¬ì‹œë“œ
      let flowTimer;
      window.addEventListener('resize', () => {
        clearTimeout(flowTimer);
        flowTimer = setTimeout(() => seedFlow(40), 200);
      });
    </script>
  </body>
</html>
