<script>
  const introText  = document.getElementById("introText");
  const logoBtn    = document.getElementById("logoBtn");
  const hsNahyun   = document.getElementById("hs-nahyun");

  const defaultMessage = `우리는 마치 마리오 파티처럼, 각자 다른 스킬을 가진 캐릭터들이 모여 하나의 큰 모험을 만들어가는 팀입니다.
누군가는 힘으로, 누군가는 아이디어로, 또 다른 누군가는 분위기를 밝히며,
함께라면 어떤 보스전도 두렵지 않습니다!`;

  // ✨ 나현 캐릭터 데이터 (이름 + 설명 합쳐서 메시지로)
  const NAHYUN = {
    message: `밝고 친화적인 에너지로 팀을 따뜻하게 묶어주는 무드메이커\n— 나현`,
    video: "videos/nahyun.mp4"
  };

  const videoModal = document.getElementById("videoModal");
  const closeModal = document.getElementById("closeModal");
  const charVideo  = document.getElementById("charVideo");

  let timer;
  function typeWriter(text, el, speed = 40) {
    clearInterval(timer);
    el.textContent = "";
    let i = 0;
    timer = setInterval(() => {
      el.textContent += text[i] ?? "";
      i++;
      if (i >= text.length) clearInterval(timer);
    }, speed);
  }

  function openVideo(src) {
    if (!src) return;
    charVideo.src = src;
    charVideo.currentTime = 0;
    videoModal.classList.add("show");
    videoModal.setAttribute("aria-hidden", "false");
    charVideo.play().catch(() => {});
  }
  function closeVideo() {
    charVideo.pause();
    charVideo.currentTime = 0;
    videoModal.classList.remove("show");
    videoModal.setAttribute("aria-hidden", "true");
    charVideo.removeAttribute("src");
    charVideo.load();
  }
  closeModal.addEventListener("click", closeVideo);
  videoModal.addEventListener("click", (e) => { if (e.target === videoModal) closeVideo(); });
  document.addEventListener("keydown", (e) => { if (e.key === "Escape") closeVideo(); });

  window.addEventListener("DOMContentLoaded", () => {
    typeWriter(defaultMessage, introText, 40);
  });
  logoBtn.addEventListener("click", () => {
    typeWriter(defaultMessage, introText, 40);
  });

  // 나현 클릭 시 → 이름 포함 문구 + 영상
  hsNahyun.addEventListener("click", () => {
    typeWriter(NAHYUN.message, introText, 35);
    openVideo(NAHYUN.video);
  });
</script>
